:root{
  --bg1:#d1a7bb; --bg2:#d5bcf5; --bg3:#b1c8d8;
  --glassA: rgba(255,255,255,0.08);
  --glassB: rgba(255,255,255,0.04);
  --accent:#b07ebd; --accent2:#ffd1dc;
  --text-light:#ffffff; --text-dark:#071021;
  --shadow-sm: 0 2px 8px rgba(0,0,0,0.1);
  --shadow-md: 0 4px 16px rgba(0,0,0,0.15);
  --shadow-lg: 0 10px 40px rgba(0,0,0,0.25);
  --transition-fast: 0.2s ease;
  --transition-smooth: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* reset */
*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;}
html,body{height:100%}
body{
  min-height:100vh; padding:26px; display:flex; flex-direction:column; gap:18px;
  background: linear-gradient(120deg,var(--bg1),var(--bg2),var(--bg3));
  background-size:400% 400%; animation: bgFlow 18s ease infinite;
  color:var(--text-light);
}

/* background flow */
@keyframes bgFlow {0%{background-position:0% 20%}50%{background-position:80% 80%}100%{background-position:0% 20%}}

/* pulse animation */
@keyframes pulse {0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}

/* glow animation */
@keyframes glow {0%,100%{box-shadow:0 0 20px rgba(176,126,189,0.3)}50%{box-shadow:0 0 40px rgba(176,126,189,0.6)}}

/* slide in */
@keyframes slideIn {from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

/* header */
.site-header{display:flex;justify-content:space-between;align-items:center;gap:12px}
.brand{display:flex;align-items:center;gap:12px}
.brand-img{width:42px;height:42px;border-radius:8px;object-fit:cover;box-shadow:0 6px 18px rgba(0,0,0,0.25)}
.site-header h1{font-size:20px;font-weight:700;color:#fff;text-shadow:0 6px 14px rgba(0,0,0,0.15)}

/* theme switch */
.theme-switch{position:relative;display:inline-block;width:48px;height:28px}
.theme-switch input{display:none}
.theme-switch .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:rgba(255,255,255,0.18);border-radius:20px;transition:.25s}
.theme-switch .slider::after{content:'';position:absolute;width:20px;height:20px;left:4px;top:4px;background:#fff;border-radius:50%;transition:.25s}
.theme-switch input:checked + .slider{background:linear-gradient(90deg,var(--accent),#df7fe6)}
.theme-switch input:checked + .slider::after{transform:translateX(20px)}

/* layout */
.app{display:grid;grid-template-columns:320px 1fr;gap:20px;align-items:start}

/* sidebar */
.playlist-sidebar{
  background:linear-gradient(180deg,var(--glassA),var(--glassB));
  border-radius:16px;padding:16px;min-height:640px;box-shadow:0 10px 30px rgba(0,0,0,0.35);backdrop-filter: blur(6px);overflow:auto;
}
.playlist-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.playlist-header h2{font-size:18px;color:#fff}
.playlist-count{font-size:13px;color:rgba(255,255,255,0.85)}

.search-box{width:100%;padding:10px 12px;margin-bottom:12px;border-radius:10px;border:none;background:rgba(255,255,255,0.05);color:#fff;outline:none}

/* upload section */
.upload-section{margin-bottom:12px}
.upload-section #uploadBtn{width:100%;padding:10px 12px;font-size:14px;background:linear-gradient(135deg,var(--accent),#ffd1dc);border:none;color:#fff;border-radius:10px;cursor:pointer;transition:all var(--transition-fast)}
.upload-section #uploadBtn:hover{background:linear-gradient(135deg,#9d6ba0,#f8a8d8);transform:translateY(-2px)}

/* playlist items */
.playlist-items{display:flex;flex-direction:column;gap:8px}
.playlist-item{padding:10px 12px;border-radius:10px;display:flex;align-items:center;justify-content:space-between;cursor:pointer;background:transparent;transition:all .15s;color:#fff}
.playlist-item .meta{display:flex;flex-direction:column}
.playlist-item small{color:rgba(255,255,255,0.8);font-size:12px}
.playlist-item:hover{background:rgba(255,255,255,0.08);transform:translateY(-2px);box-shadow:var(--shadow-sm)}
.playing-item{background:linear-gradient(90deg,rgba(176,126,189,0.15),rgba(255,209,220,0.1));border-left:4px solid var(--accent);padding-left:8px;animation:glow 2s ease-in-out infinite}

/* up next */
.upnext{margin-top:18px}
.upnext h3{color:#fff;margin-bottom:8px;font-size:15px}
.upnext-list{display:flex;flex-direction:column;gap:8px}

/* player */
.player .card{display:flex;gap:22px;padding:22px;border-radius:16px;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01));box-shadow:0 14px 40px rgba(0,0,0,0.45);align-items:stretch}

/* left glass */
.left{width:320px;display:flex;flex-direction:column;align-items:center;gap:14px}
.glass{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:14px;padding:12px;backdrop-filter: blur(8px)}
.glass-inner{width:260px;height:260px;border-radius:14px;overflow:hidden;position:relative;box-shadow:0 10px 38px rgba(0,0,0,0.35)}
.album-art{width:100%;height:100%;object-fit:cover;display:block;transition:transform .6s ease;filter:brightness(1)}
.album-art.playing{
  /* stop rotation while preserving brightness effect */
  animation: none !important;
  filter: brightness(1.1);
}
.album-art:hover{transform:scale(1.05)}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
.glow-ring{position:absolute;inset:0;border-radius:14px;box-shadow:0 0 60px rgba(176,126,189,0.3);pointer-events:none;transition:box-shadow 0.3s}
.glass-inner:hover .glow-ring{box-shadow:0 0 80px rgba(176,126,189,0.5)}

/* marquee */
.marquee{width:260px;overflow:hidden;white-space:nowrap}
.marquee span{display:inline-block;padding-left:100%;animation:marq 9s linear infinite}
.marquee.wide span{padding-left:0;animation:marq 12s linear infinite}
@keyframes marq{0%{transform:translateX(0)}50%{transform:translateX(-40%)}100%{transform:translateX(0)}}

/* equalizer */
.equalizer{display:flex;gap:6px;align-items:end;width:260px;height:48px;margin-top:4px;justify-content:center}
.equalizer .bar{width:8px;border-radius:4px;background:linear-gradient(180deg,var(--accent),#ffd1dc);height:8px;transform-origin:bottom;transition:height 0.1s ease}

/* right */
.right{flex:1;display:flex;flex-direction:column;gap:12px}
.song-info h3{font-size:20px;color:#fff;letter-spacing:0.2px;overflow:hidden}
.song-info p{color:rgba(255,255,255,0.9)}

/* visualizer */
.visualizer{width:100%;height:96px;border-radius:10px;background:transparent;display:block}

/* progress */
.progress-area{display:flex;align-items:center;gap:12px}
.progress-bar{flex:1;height:12px;background:rgba(255,255,255,0.03);border-radius:999px;position:relative;overflow:hidden}
.progress-fill{position:absolute;left:0;top:0;height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#8fd3f4)}
.progress-input{position:absolute;left:0;top:-6px;width:100%;height:22px;background:transparent;border:none;appearance:none;outline:none}
.progress-input::-webkit-slider-thumb{appearance:none;width:14px;height:14px;border-radius:50%;background:#fff;box-shadow:0 1px 3px rgba(0,0,0,0.5);cursor:pointer;border:2px solid rgba(0,0,0,0.15)}

/* controls */
.controls{display:flex;align-items:center;gap:14px;margin-top:6px;justify-content:center}
.btn{background:rgba(255,255,255,0.05);border:none;color:inherit;padding:10px;border-radius:10px;cursor:pointer;font-size:16px;transition:all var(--transition-fast);backdrop-filter:blur(4px)}
.btn:hover{background:rgba(255,255,255,0.1);transform:translateY(-2px);box-shadow:var(--shadow-md)}
.btn:active{transform:translateY(0)}
.btn.small{padding:8px;font-size:14px}
.btn.active{background:rgba(255,255,255,0.15);color:var(--accent2)}
.btn.play{width:72px;height:72px;border-radius:50%;background:linear-gradient(135deg,var(--accent),#d68fe0);display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 10px 30px rgba(176,126,189,0.4);transition:all var(--transition-smooth)}
.btn.play:hover{transform:scale(1.1);box-shadow:0 15px 40px rgba(176,126,189,0.6)}
.btn.play:active{transform:scale(0.95)}
.hidden{display:none}

/* secondary row */
.secondary{display:flex;justify-content:space-between;align-items:center;margin-top:8px;flex-wrap:wrap;gap:12px}
.volume{display:flex;align-items:center;gap:8px}
.volume input{width:160px}
.volume label{font-size:20px;cursor:pointer;transition:transform var(--transition-fast)}
.volume label:hover{transform:scale(1.2)}
.song-actions{display:flex;gap:10px;flex-wrap:wrap}
.action-btn{background:linear-gradient(135deg,var(--accent),#d68fe0);border:none;color:#fff;padding:10px 16px;border-radius:12px;cursor:pointer;font-weight:500;transition:all var(--transition-smooth);box-shadow:var(--shadow-sm)}
.action-btn:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}
.action-btn:active{transform:translateY(0)}

/* bottom panel */
.bottom-panel{margin-top:12px;padding:14px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));backdrop-filter:blur(6px)}
.now-playing-extra h4{color:#fff;margin-bottom:6px}
.lyrics-box summary{cursor:pointer;padding:8px;border-radius:8px;background:rgba(255,255,255,0.02)}

/* mini player */
.mini-player{position:fixed;left:12px;right:12px;bottom:18px;background:linear-gradient(90deg,rgba(255,255,255,0.03),rgba(255,255,255,0.015));padding:8px;border-radius:12px;display:flex;align-items:center;gap:10px;box-shadow:0 10px 30px rgba(0,0,0,0.4);backdrop-filter:blur(6px)}
.mini-player img{width:48px;height:48px;border-radius:8px;object-fit:cover}
.mini-player .mini-meta{flex:1;overflow:hidden}
.mini-player .mini-meta div{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#fff}
.mini-player .mini-controls .mini-btn{background:transparent;border:none;color:#fff;font-size:18px;cursor:pointer}

/* floating notes */
.floating-notes::before,
.floating-notes::after {
  content:"ðŸŽµ";
  position:fixed;
  font-size:32px;
  opacity:0;
  left:12%;
  bottom:-50px;
  animation:floatUp 12s ease-in-out infinite;
  pointer-events:none;
  z-index:1;
}
.floating-notes::after{
  content:"ðŸŽ¶";
  left:76%;
  animation-delay:3s;
  font-size:28px;
}
@keyframes floatUp{
  0%{bottom:-60px;opacity:0;transform:translateX(0) rotate(0deg)}
  10%{opacity:0.7}
  50%{transform:translateX(20px) rotate(15deg)}
  100%{bottom:120%;opacity:0;transform:translateX(-20px) rotate(-15deg)}
}

/* footer credit */
.footer-credit{
  margin-top:auto;
  padding:20px;
  text-align:center;
  background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01));
  border-radius:16px;
  backdrop-filter:blur(8px);
  box-shadow:var(--shadow-md);
  animation:slideIn 0.6s ease;
}
.credit-content{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  flex-wrap:wrap;
  color:#fff;
  font-size:15px;
}
.credit-icon{
  font-size:24px;
  animation:pulse 2s ease-in-out infinite;
}
.heart{
  color:#ff6b9d;
  display:inline-block;
  animation:pulse 1.5s ease-in-out infinite;
}
.credit-content strong{
  background:linear-gradient(135deg,var(--accent),#ffd1dc);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  font-weight:700;
  font-size:17px;
}
.credit-year{
  opacity:0.7;
  font-size:13px;
}

/* loading overlay */
.loading-overlay{
  position:fixed;
  inset:0;
  background:linear-gradient(135deg,rgba(209,167,187,0.95),rgba(213,188,245,0.95));
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:20px;
  z-index:9999;
  backdrop-filter:blur(10px);
  transition:opacity 0.5s ease,visibility 0.5s ease;
}
.loading-overlay.hidden{
  opacity:0;
  visibility:hidden;
  pointer-events:none;
}
.loading-spinner{
  width:60px;
  height:60px;
  border:4px solid rgba(255,255,255,0.3);
  border-top-color:#fff;
  border-radius:50%;
  animation:spin 1s linear infinite;
}
.loading-overlay p{
  color:#fff;
  font-size:18px;
  font-weight:500;
}

/* toast notification */
.toast{
  position:fixed;
  bottom:100px;
  left:50%;
  transform:translateX(-50%) translateY(100px);
  background:linear-gradient(135deg,rgba(255,255,255,0.95),rgba(255,255,255,0.85));
  color:var(--text-dark);
  padding:16px 24px;
  border-radius:12px;
  box-shadow:var(--shadow-lg);
  font-weight:500;
  z-index:10000;
  opacity:0;
  transition:all var(--transition-smooth);
  backdrop-filter:blur(10px);
}
.toast.show{
  opacity:1;
  transform:translateX(-50%) translateY(0);
}

/* responsive */
@media (max-width:980px){
  .app{grid-template-columns:1fr}
  .left{display:none}
  .playlist-sidebar{order:2;min-height:380px}
  .mini-player.hidden{display:flex}
  .footer-credit{margin-top:80px}
}

@media (max-width:640px){
  body{padding:12px}
  .site-header h1{font-size:16px}
  .brand-img{width:32px;height:32px}
  .song-actions{width:100%;justify-content:center}
  .action-btn{flex:1;min-width:120px}
}

/* Equalizer Controls */
.eq-controls{width:260px;margin-top:8px;display:flex;flex-direction:column;gap:8px;padding:8px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(255,255,255,0.005))}
.eq-row{display:flex;align-items:center;gap:8px}
.eq-row label{width:72px;font-size:13px;color:#fff}
.eq-row input[type="range"]{flex:1;-webkit-appearance:none;-moz-appearance:none;appearance:none;height:6px;background:linear-gradient(90deg,var(--accent),#ffd1dc);border-radius:6px;outline:none}
.eq-row input[type="range"]::-moz-range-thumb{
  appearance:none;
  width:14px;
  height:14px;
  border-radius:50%;
  background:linear-gradient(135deg,var(--accent),#ffd1dc);
  box-shadow:0 2px 6px rgba(0,0,0,0.3);
  border:none;
  cursor:pointer;
}
.eq-row output{width:56px;text-align:right;font-size:12px;color:rgba(255,255,255,0.9)}
.eq-actions{display:flex;gap:8px;justify-content:space-between;margin-top:6px}
.eq-actions .action-btn{padding:6px 10px;font-size:13px}
